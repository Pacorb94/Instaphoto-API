FROM php:8.0-fpm-alpine
#Actualizamos los paquetes de apk, instalamos bash y las extensiones de PHP
RUN apk --no-cache update && apk --no-cache add bash && docker-php-ext-install pdo pdo_mysql
#Creamos este directorio y nos movemos a Ã©l
WORKDIR /var/www/Instaphoto
COPY ../ ./
#Descargamos Composer y copiamos su directorio en el mismo directorio del contenedor
COPY --from=composer /usr/bin/composer /usr/bin/composer
#Instalamos las dependencias y cambiamos de propietario el directorio
RUN composer install && chown -R www-data:www-data /var/www/Instaphoto
RUN php artisan cache:clear && php artisan optimize